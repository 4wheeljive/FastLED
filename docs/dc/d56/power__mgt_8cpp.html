<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FastLED: power_mgt.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../fastled_logo.png" type="image/svg+xml" rel="shortcut icon" />
<link href="../../style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">DoxygenAwesomeDarkModeToggle.init()</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FastLED<span id="projectnumber">&#160;3.9.15</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dc/d56/power__mgt_8cpp.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">power_mgt.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions to limit the power used by FastLED. </p>

<p class="definition">Definition in file <a class="el" href="../../dc/d56/power__mgt_8cpp_source.html">power_mgt.cpp</a>.</p>
</div><div class="textblock"><code>#include &quot;<a class="el" href="../../db/d97/_fast_l_e_d_8h_source.html">FastLED.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d5b/power__mgt_8h_source.html">power_mgt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d2a/namespace_8h_source.html">fl/namespace.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for power_mgt.cpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../da/d7b/power__mgt_8cpp__incl.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div>
<p><a href="../../dc/d56/power__mgt_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2d8dda85477a00deab830effc5159d33" id="r_a2d8dda85477a00deab830effc5159d33"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d56/power__mgt_8cpp_a2d8dda85477a00deab830effc5159d33.html#a2d8dda85477a00deab830effc5159d33">FASTLED_INTERNAL</a></td></tr>
<tr class="memdesc:a2d8dda85477a00deab830effc5159d33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables pragma messages and warnings.  <br /></td></tr>
<tr class="separator:a2d8dda85477a00deab830effc5159d33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5caa0e4614a6e13ab3d8b7380337694" id="r_ae5caa0e4614a6e13ab3d8b7380337694"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d56/power__mgt_8cpp_ae5caa0e4614a6e13ab3d8b7380337694.html#ae5caa0e4614a6e13ab3d8b7380337694">POWER_DEBUG_PRINT</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ae5caa0e4614a6e13ab3d8b7380337694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug Option: Set to enable Serial debug statements for power limit functions.  <br /></td></tr>
<tr class="separator:ae5caa0e4614a6e13ab3d8b7380337694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5accdd4ce7a8ad188df024ae552324e8" id="r_a5accdd4ce7a8ad188df024ae552324e8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d56/power__mgt_8cpp_a5accdd4ce7a8ad188df024ae552324e8.html#a5accdd4ce7a8ad188df024ae552324e8">POWER_LED</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a5accdd4ce7a8ad188df024ae552324e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Debug Option: Set to 1 to enable the power limiting LED.  <br /></td></tr>
<tr class="separator:a5accdd4ce7a8ad188df024ae552324e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafff15ebb8adee6a6c76fd46eb980397c" id="r_gafff15ebb8adee6a6c76fd46eb980397c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1d/group___power_gafff15ebb8adee6a6c76fd46eb980397c.html#gafff15ebb8adee6a6c76fd46eb980397c">calculate_max_brightness_for_power_mW</a> (const <a class="el" href="../../d7/d82/struct_c_r_g_b.html">CRGB</a> *ledbuffer, uint16_t numLeds, uint8_t target_brightness, uint32_t max_power_mW)</td></tr>
<tr class="memdesc:gafff15ebb8adee6a6c76fd46eb980397c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the highest brightness level you can use and still stay under the specified power budget for a given set of LEDs.  <br /></td></tr>
<tr class="separator:gafff15ebb8adee6a6c76fd46eb980397c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeb674bb1095873cfaab1bc2796541020" id="r_gaeb674bb1095873cfaab1bc2796541020"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1d/group___power_gaeb674bb1095873cfaab1bc2796541020.html#gaeb674bb1095873cfaab1bc2796541020">calculate_max_brightness_for_power_mW</a> (uint8_t target_brightness, uint32_t max_power_mW)</td></tr>
<tr class="memdesc:gaeb674bb1095873cfaab1bc2796541020"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the highest brightness level you can use and still stay under the specified power budget for all sets of LEDs.  <br /></td></tr>
<tr class="separator:gaeb674bb1095873cfaab1bc2796541020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab519e78baab1cfbaf62663c48c1c2f35" id="r_gab519e78baab1cfbaf62663c48c1c2f35"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1d/group___power_gab519e78baab1cfbaf62663c48c1c2f35.html#gab519e78baab1cfbaf62663c48c1c2f35">calculate_max_brightness_for_power_vmA</a> (const <a class="el" href="../../d7/d82/struct_c_r_g_b.html">CRGB</a> *ledbuffer, uint16_t numLeds, uint8_t target_brightness, uint32_t max_power_V, uint32_t max_power_mA)</td></tr>
<tr class="memdesc:gab519e78baab1cfbaf62663c48c1c2f35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the highest brightness level you can use and still stay under the specified power budget for a given set of LEDs.     <br /></td></tr>
<tr class="separator:gab519e78baab1cfbaf62663c48c1c2f35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga594568be6aba941c635193a6d46f715e" id="r_ga594568be6aba941c635193a6d46f715e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1d/group___power_ga594568be6aba941c635193a6d46f715e.html#ga594568be6aba941c635193a6d46f715e">calculate_unscaled_power_mW</a> (const <a class="el" href="../../d7/d82/struct_c_r_g_b.html">CRGB</a> *ledbuffer, uint16_t numLeds)</td></tr>
<tr class="memdesc:ga594568be6aba941c635193a6d46f715e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines how many milliwatts the current LED data would draw at max brightness (255)  <br /></td></tr>
<tr class="separator:ga594568be6aba941c635193a6d46f715e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga555e128ef46e371cb5774c1fe3320728" id="r_ga555e128ef46e371cb5774c1fe3320728"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1d/group___power_ga555e128ef46e371cb5774c1fe3320728.html#ga555e128ef46e371cb5774c1fe3320728">delay_at_max_brightness_for_power</a> (uint16_t ms)</td></tr>
<tr class="memdesc:ga555e128ef46e371cb5774c1fe3320728"><td class="mdescLeft">&#160;</td><td class="mdescRight">Similar to <a class="el" href="../../dd/dbb/class_c_fast_l_e_d_a6819ff831058a710d4582dfc09817202.html#a6819ff831058a710d4582dfc09817202" title="Delay for the given number of milliseconds.">CFastLED::delay()</a>, but pre-adjusts brightness to keep below the power threshold.  <br /></td></tr>
<tr class="separator:ga555e128ef46e371cb5774c1fe3320728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07198890442df25532c1beaafb093648" id="r_ga07198890442df25532c1beaafb093648"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1d/group___power_ga07198890442df25532c1beaafb093648.html#ga07198890442df25532c1beaafb093648">set_max_power_in_milliwatts</a> (uint32_t powerInmW)</td></tr>
<tr class="memdesc:ga07198890442df25532c1beaafb093648"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the maximum power used in watts.  <br /></td></tr>
<tr class="separator:ga07198890442df25532c1beaafb093648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8db01f418cbff03a8d51caa528e44e0d" id="r_ga8db01f418cbff03a8d51caa528e44e0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1d/group___power_ga8db01f418cbff03a8d51caa528e44e0d.html#ga8db01f418cbff03a8d51caa528e44e0d">set_max_power_in_volts_and_milliamps</a> (uint8_t volts, uint32_t milliamps)</td></tr>
<tr class="memdesc:ga8db01f418cbff03a8d51caa528e44e0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the maximum power used in milliamps for a given voltage.  <br /></td></tr>
<tr class="separator:ga8db01f418cbff03a8d51caa528e44e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c2ec1f940a152838ac6083ead3a9bcd" id="r_ga9c2ec1f940a152838ac6083ead3a9bcd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1d/group___power_ga9c2ec1f940a152838ac6083ead3a9bcd.html#ga9c2ec1f940a152838ac6083ead3a9bcd">set_max_power_indicator_LED</a> (uint8_t pinNumber)</td></tr>
<tr class="memdesc:ga9c2ec1f940a152838ac6083ead3a9bcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select a pin with an LED that will be flashed to indicate that power management is pulling down the brightness.  <br /></td></tr>
<tr class="separator:ga9c2ec1f940a152838ac6083ead3a9bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga510b6ca1ea6da7f0f89dcf353f19ffde" id="r_ga510b6ca1ea6da7f0f89dcf353f19ffde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1d/group___power_ga510b6ca1ea6da7f0f89dcf353f19ffde.html#ga510b6ca1ea6da7f0f89dcf353f19ffde">show_at_max_brightness_for_power</a> ()</td></tr>
<tr class="memdesc:ga510b6ca1ea6da7f0f89dcf353f19ffde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Similar to <a class="el" href="../../dd/dbb/class_c_fast_l_e_d_a3adb23ec5f919524928d576002cb45de.html#a3adb23ec5f919524928d576002cb45de" title="Update all our controllers with the current led colors.">CFastLED::show()</a>, but pre-adjusts brightness to keep below the power threshold.  <br /></td></tr>
<tr class="separator:ga510b6ca1ea6da7f0f89dcf353f19ffde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acac97febb6af8de04737f3e12ac3e87e" id="r_acac97febb6af8de04737f3e12ac3e87e"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d56/power__mgt_8cpp_acac97febb6af8de04737f3e12ac3e87e.html#acac97febb6af8de04737f3e12ac3e87e">gMaxPowerIndicatorLEDPinNumber</a> = 0</td></tr>
<tr class="separator:acac97febb6af8de04737f3e12ac3e87e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade476265bd7b549469db873ea440010a" id="r_ade476265bd7b549469db873ea440010a"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d56/power__mgt_8cpp_ade476265bd7b549469db873ea440010a.html#ade476265bd7b549469db873ea440010a">gMCU_mW</a> = 25 * 5</td></tr>
<tr class="separator:ade476265bd7b549469db873ea440010a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Power Usage Values</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These power usage values are approximate, and your exact readings will be slightly (10%?) different from these.</p>
<p>They were arrived at by actually measuing the power draw of a number of different LED strips, and a bunch of closed-loop-feedback testing to make sure that if we USE these values, we stay at or under the target power consumption. Actual power consumption is much, much more complicated and has to include things like voltage drop, etc., etc. However, this is good enough for most cases, and almost certainly better than no power management at all.</p>
<p>You're welcome to adjust these values as needed; there may eventually be an API for changing these on the fly, but it saves codespace and RAM to have them be compile-time constants. </p>
</div></td></tr>
<tr class="memitem:a57bd21bab915f0b749f1d9708d30a30a" id="r_a57bd21bab915f0b749f1d9708d30a30a"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d56/power__mgt_8cpp_a57bd21bab915f0b749f1d9708d30a30a.html#a57bd21bab915f0b749f1d9708d30a30a">gBlue_mW</a> = 15 * 5</td></tr>
<tr class="memdesc:a57bd21bab915f0b749f1d9708d30a30a"><td class="mdescLeft">&#160;</td><td class="mdescRight">15mA @ 5v = 75mW  <br /></td></tr>
<tr class="separator:a57bd21bab915f0b749f1d9708d30a30a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abff21fa04feb9c8baa32cac09e6553e1" id="r_abff21fa04feb9c8baa32cac09e6553e1"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d56/power__mgt_8cpp_abff21fa04feb9c8baa32cac09e6553e1.html#abff21fa04feb9c8baa32cac09e6553e1">gDark_mW</a> = 1 * 5</td></tr>
<tr class="memdesc:abff21fa04feb9c8baa32cac09e6553e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">1mA @ 5v = 5mW  <br /></td></tr>
<tr class="separator:abff21fa04feb9c8baa32cac09e6553e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35510293c6e446cede6d6a5b9e022eec" id="r_a35510293c6e446cede6d6a5b9e022eec"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d56/power__mgt_8cpp_a35510293c6e446cede6d6a5b9e022eec.html#a35510293c6e446cede6d6a5b9e022eec">gGreen_mW</a> = 11 * 5</td></tr>
<tr class="memdesc:a35510293c6e446cede6d6a5b9e022eec"><td class="mdescLeft">&#160;</td><td class="mdescRight">11mA @ 5v = 55mW  <br /></td></tr>
<tr class="separator:a35510293c6e446cede6d6a5b9e022eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb63507c4d4608fcfe69f09f3a5d5ecd" id="r_abb63507c4d4608fcfe69f09f3a5d5ecd"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d56/power__mgt_8cpp_abb63507c4d4608fcfe69f09f3a5d5ecd.html#abb63507c4d4608fcfe69f09f3a5d5ecd">gRed_mW</a> = 16 * 5</td></tr>
<tr class="memdesc:abb63507c4d4608fcfe69f09f3a5d5ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">16mA @ 5v = 80mW  <br /></td></tr>
<tr class="separator:abb63507c4d4608fcfe69f09f3a5d5ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dc/d56/power__mgt_8cpp.html">power_mgt.cpp</a></li>
    <li class="footer">Generated on Thu May 29 2025 04:44:57 for FastLED by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
<!-- ... -->
</body>
</html>
